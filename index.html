<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<script src="https://code.jquery.com/jquery-2.1.1.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        // var userName = prompt("Your name?")
        // $("#main").append("Welcome back, ", userName + "!")

        var emailTotal = geemails.length;

        $("#inboxCount").append("<p>" + "You have " + emailTotal + " emails in your inbox.");

        // Still need to make a count that updates

		geemails.forEach(function(message) {
		    var container = $('<div class="email"></div>');
		    container.append('<li id = "date">' + 'Date: ' + message.date);
		    container.append('<li id = "subject">' + 'Subject: ' + message.subject);
		    container.append('<li id = "sender">' + 'Sender: ' + message.sender + '<p>');
		    container.append('<li id = "body">' + message.body + '<p>');
		    $("body").append(container);
		    $('li#body').hide();
		    $( "li#subject" ).click(function() {
				$( "li#body" ).show("slow");
			})
			$( "li#subject" ).dblclick(function() {
				$( "li#body" ).hide("slow");
			})
		})

		var generateEmail = function(message){
			var now = new Date();
			var message = generateMessage(now);
			var container = $('<div class="email"></div>');
		    container.append('<li id = "date">' + 'Date: ' + message.date);
		    container.append('<li id = "subject">' + 'Subject: ' + message.subject);
		    container.append('<li id = "sender">' + 'Sender: ' + message.sender + '<p>');
		    container.append('<li id = "body">' + message.body + '<p>');
		    $("body").append(container);
		    $('li#body').hide();
		    $( "li#subject" ).click(function() {
				$( "li#body" ).show("slow");
			})
			$( "li#subject" ).dblclick(function() {
				$( "li#body" ).hide("slow");
			})
		};

		function addNewMessage(){ 

        var newMessage = getNewMessage();
        console.log(getNewMessage()); 
        generateEmail([newMessage]);

        // var emailTotal = geemails.length;

        // $("#main").append("<p>" + "You have " + emailTotal + " emails in your inbox.");
     
        emailTotal ++; //increment email count
        geemails.length = emailTotal;

        }
      	setInterval(addNewMessage, 5000);

      };

    </script>

	</head>
	<body>
		<div class="container" id="main">
		</div>
		<div id = "content">
		<h1>GEE-Mail</h1>
		<div id = "inboxCount"></div>
		</div>
	</body>
</html>